<!DOCTYPE html>
<html data-ng-app = "BlogModule">
<head>
    <meta http-equiv="content-type" content="text/html"; charset="UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="assets/img/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Dosis:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
    <link rel="stylesheet" type="text/css" href="assets/css/hover-min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

    <title>Create New Post | Work &amp; Travel blog</title>

    <style>
        .btn{
            background: #79B044;
        }
    </style>

    <!-- HTML5 shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="blog preload" data-ng-controller = "NewPostController">

<!------------------ HEADER ------------------>
<header class="site-header" role="banner">
    <div class="navbar-wrapper">
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand hvr-push" href="blog.html"><img src="assets/img/logo.png" alt="Team logo"></a>
                </div><!--navbar-header-->
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="index.html">Home</a></li>
                        <li class="active"><a href="blog.html">Blog</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li data-ng-hide = "{{showPostButton}}"><a href="signup.html">Sign In</a></li>
                        <li data-ng-show = "{{showPostButton}}"><a href="new_post.html"><i class = "glyphicon glyphicon-plus"></i> New Post</a></li>
                        <li data-ng-show = "{{showPostButton}}" data-ng-click="logout();"><a href=""><i class = "glyphicon glyphicon-remove"></i> Logout</a></li>
                    </ul>
                </div><!--navbar-collapse-->
            </div><!--container-->
        </div><!--navbar-->
    </div><!--navbar wrapper-->
</header>

<section class="feature-image feature-image-default-alt" data-type="background" dta-speed="2">

    <h1 class="page-title">{{blog.name}}</h1>

</section>

<!------------------ BLOG CONTENT ------------------>
<div class="container">
    <div class="row" id="primary">

        <h3>Post Content</h3>
        <hr/>
        <div style="padding:5px 0 5px 0 ">
            <button  id="bold" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-bold"></i></button>
            <button  id="ital" style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-italic"></i></button>
            <button id="unde" style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-text-color"></i></button>
            <button id="toleft" style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-align-left"></i></button>
            <button id="center" style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-align-center"></i></button>
            <button id="toright" style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-align-right"></i></button>
            <button style="margin-left:2%" class="btn btn-lg btn-default"><i class="glyphicon glyphicon-picture"></i></button>
        </div>
        <hr/>

        <h4>Name:</h4>
        <input class="form-control" data-ng-model="title" style="width:40%;margin-top:-3.29%;margin-left:13%" type="text" id="sm">
        <br/>
        <form role="form">
            <div class="form-group">
                <h4>Content:</h4>
                <textarea data-ng-model="content" type='text' id='vlez' style="width:80%;margin-left:13%;margin-top:-3.29%;height:120px;;"></textarea>
            </div>
        </form>

        <br/>
        <h4>Image:</h4>
        <input type ="text" data-ng-model="imageURL" name = "imgUrl" class = "form-control" style="width:40%;margin-top:-3.29%;margin-left:13%" />
        <input type="text" class = "hidden" data-ng-model = "userId" id = "userId" />

        <div id="dialog" style = "display: none;">

            <h4 style="margin-left:12%; margin-top:-5%" id="chose">Chose photo</h4>
            <h4 style="margin-left:12%;"id="upload">Upload photo</h4>
            <button style="margin-left:27%; margin-top:-9%" class="btn btn-primary" id="pic">add pic</button>


            <div id="c">
                <input type="file" multiple/>
            </div>
            <div id="u">
                <button id="upl">upload</button>
            </div>
        </div>


        <br/>

        <button data-ng-click="addPost();" style="width:20%;margin-left:73%;" class="btn btn-lg btn-primary">Post</button>

        <hr/>
    </div>

    </div><!-- row -->
</div><!-- container -->




<!------------------ SIGN UP SECTION------------------>
<section id="signup" data-type="background" data-speed="4">
    <div class="container">
        <div class="row">
            <div class="col-sm-6 col-sm-offset-3">
                <h2>Would you like to contribute with an <strong>experience</strong>?</h2>
                <p><a href='signup.html' class="btn btn-lg btn-block btn-success">Yes, sign me up! </a></p>
            </div><!-- col -->
        </div><!-- row -->
    </div><!-- container -->
</section><!-- signup -->



<!------------------ MODAL ------------------>
<div class="modal fade" id="mymodal">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-envelope"></i>Subscribe to our mailing list</h4>
            </div><!-- modal header -->

            <div class="modal-body">
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur, <em>sunt in!</em></p>
                <form class="form-inline" role="form">
                    <div class="form-group">
                        <label class="sr-only" for="subscribe-name">Your first name</label>
                        <input type="text" class="form-control" id="subscribe-name" placeholder="Your first name">
                    </div><!-- form group -->
                    <div class="form-group">
                        <label class="sr-only" for="subscribe-email">and your email</label>
                        <input type="text" class="form-control" id="subscribe-email" placeholder="and your email">
                    </div><!-- form group -->
                    <input type="submit" class="btn btn-danger" value="Subscribe!">
                </form>
                <hr>
                <p><small> Gravida commodo donec, quis turpis aenean nibh ante vivamus est. Lacinia leo, at quam non lacinia ligula lorem donec. <br> Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat &amp; Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</small></p>
            </div><!-- modal body -->

        </div><!-- modal content -->
    </div><!-- modal dialog -->
</div><!-- modal -->


<!------------------ BOOTSTRAP CORE JAVASCRIPT ------------------>

<script src="assets/js/jquery-2.2.1.min.js"></script>
<script src="assets/js/jquery.waypoints.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/main.js"></script>

<!--angular stuff-->
<script src = "assets/js/angular.min.js"></script>
<script src = "app/app.js"></script>
<script src = "assets/js/dirPagination.js"></script>
<script src = "app/services/BlogService.js"></script>
<script src = "app/controllers/NewPostController.js"></script>
<script src = "app/controllers/SidebarController.js"></script>


<script type="text/javascript">

    function setSelectionRange(input, selectionStart, selectionEnd) {
        if (input.setSelectionRange) {
            input.focus();
            input.setSelectionRange(selectionStart, selectionEnd);
        } else if (input.createTextRange) {
            var range = input.createTextRange();
            range.collapse(true);
            range.moveEnd('character', selectionEnd);
            range.moveStart('character', selectionStart);
            range.select();
        }
    }

    function getSelectionText() {
        var text = "";
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.selection && document.selection.type != "Control") {
            text = document.selection.createRange().text;
        }
        return text;
    }


    function getSelected()
    {
        var u     = $('#vlez').val();
        var start = $('#vlez').get(0).selectionStart;
        var end   = $('#vlez').get(0).selectionEnd;

        return [u.substring(0, start), u.substring(end), u.substring(start, end)];
    }

    function setCaretToPos(input, pos) {
        setSelectionRange(input, pos, pos);
    }
    var isBold  = false;
    var isUnderlined = false;
    var isItalic = false;
    $(document).ready(function(){
        $("#bold").click(function(){

            if(isBold == false){

                var dolzina = $("#vlez").val().length;
                var x = $("#vlez").val();
                $("#vlez").val(x+"<b></b>");

                setCaretToPos($("#vlez")[0], dolzina+3);
                isBold=true;
            }
            else{
                var dolzina = $("#vlez").val().length;
                setCaretToPos($("#vlez")[0], dolzina);
                isBold=false;
            }


        });
        $("#ital").click(function(){

            if(isItalic == false){

                var dolzina = $("#vlez").val().length;
                var x = $("#vlez").val();
                $("#vlez").val(x+"<i></i>");

                setCaretToPos($("#vlez")[0], dolzina+3);
                isItalic=true;
            }
            else{
                var dolzina = $("#vlez").val().length;
                setCaretToPos($("#vlez")[0], dolzina);
                isItalic=false;
            }


        });
        $("#unde").click(function(){

            if(isUnderlined == false){

                var dolzina = $("#vlez").val().length;
                var x = $("#vlez").val();
                $("#vlez").val(x+"<b></b>");

                setCaretToPos($("#vlez")[0], dolzina+3);
                isUnderlined=true;
            }
            else{
                var dolzina = $("#vlez").val().length;
                setCaretToPos($("#vlez")[0], dolzina);
                isUnderlined=false;
            }


        });

        $("#toleft").click(function(){
            var select = getSelected();
            console.log(select);
            $('#vlez').val(select[0] + '<p style="text-align: left">'+ select[2] + '</p>' + select[1]);

        });

        $("#toright").click(function(){
            var select = getSelected();
            console.log(select);
            $('#vlez').val(select[0] + '<p style="text-align: right">'+ select[2] + '</p>' + select[1]);

        });
        $("#center").click(function(){
            var select = getSelected();
            console.log(select);
            $('#vlez').val(select[0] + '<p style="text-align: center">'+ select[2] + '</p>' + select[1]);

        });

        $("#c").hide();
        $("#u").hide();

        $("#upload").click(function(){
            $("#c").hide();
            $("#u").show();
        });

        $("#chose").click(function(){
            $("#c").show();
            $("#u").hide();
        });
    });
</script>
</body>
</html>